#+TITLE: Images des Mathématiques --- technical documentation

This documents the /squelette/ of the website at
http://images.math.cnrs.fr/ and complements the documentation there
(which is mainly addressed at article authors and editors --- this one
is full of SPIP ang PHP and geek stuff).

* Features added to SPIP
*** Visible
***** Refereeing support
***** Billettistes
***** Planning
***** MathJax
***** Video and sound
*** In the backgroung
***** E-mail notification of teams
***** LaTeX export

* Code management
This is done in Git, and there are 4 branches to keep track of (plus
temporary ones for experimental features, if needed). That can change if
we end up working in a team but so far:
- =spip3= is tracking the SVN version of the SPIP core (without
  extensions)
- =upstream= incorporates the extensions, and merges =spip3=
  periodically (meaning whenever a bug is fixed there)
- =idm= is the current status of the website, and merges =upstream= when
  needed
- =test= is for development of new but "easy" features, and is typically
  merged into =idm= the same day

* Issues
*** Urgent
*** In progress
- [CSS] Merge =div.plan= and =div.lexique=
- Overhaul of the search engine [33%]
  - [X] Accents, this is done by SPIP3
  - [ ] Sort, classify etc by theme
  - [ ] Automatic article suggestion
- iPhone version [33%]
  - [X] Basic iphone.html
  - [ ] Specific style for small screens (it used to work using
    =max-width=, but apparently that breaks older browsers ...)
  - [ ] Find a way to make login etc. possible
- One year ago on IdM [33%]
  - [X] Create the page, basic functionality
  - [ ] Merge it with =sommaire.html= for maintainability
  - [ ] Merge the system with the color filtering ?
- Partenariats [50%]
  - [X] Add keywords, display the logo on relevant articles
  - [ ] Make the phrase customizable by keyword
*** Next
- CC per article
- Loop videos
- Make the billets visually different
- Upgrade Mathjax [0%]
  - [ ] Wait for label/ref to be in mainline mathjax
  - [ ] Wait for it to be in a stable release
  - [ ] Remove the previous hack
- Choose the member in the billets team differently
- =squelettes/propose.html=
  - Add an anchor to the forum messages for linking
- =squelettes/navigation.html=
  - should be re-done completely
- re-install =forms_et_tables= (3.0, doesn't work yet)
*** Backburner
- Buttons to write to groups of people
- Filter display by color
- Floating picture
- Relecteur occasionnel
- Translation encouragement
- Unify the permissions
- Put =#SPIP_CRON= on specific pages but not on =sommaire.html=
- Use =#HTTP_HEADER= rather than php in =inc/head.php=
- Merge =inc/forum-message= and =inc/forum-message-prive=
- In =formulaires/relecteurs_vote.php=, the SQL update code should be
  elsewhere, the rest should go
*** Geekeries and SPIPeries
- In a loop, =#_parent:TITRE=
- plugin =spip-bonux=
  - [ ] =#INFO_TITRE{article,324}=
- Refactor uses of =idm_notify= [75%]
  - [X] Accept an array as recipient
  - [X] Call it with an array when possible
  - [X] Store recipient lists in a the database, table =spip_teams=
  - [ ] Accept the name of a team as an argument to =idm_notify=
- =prive/squelettes/contenu/idm_relecteur.html=
  - Make the relecteur an "objet éditorial" ?
- Files which are patched versions of upstream (store as a patch for upgrades)
  - =.htaccess= (from =htaccess.txt=)
  - =formulaires/inc-forum_previsu.html=
  - =prive/objets/infos/article.html=
- Use the =|unique= filter instead of doing it by hand
  - =squelettes/iphone.html=
  - =squelettes/lexique.html=
